###################
#### Appending ####
###################
###################
results <- rbind(r14, r12, r10, r08, r06, r04)
results$distr[results$distr==" 05"] <- "05"
results$dist1 <- substr(results$distr, 0, 2)
drops4 <- c("S","S ", "SF", "SU")
results <- results[!(results$dist1 %in% drops4),]
dvote <- subset(results, totvote=="District Votes:")
dvote <- subset(dvote, select = c("abbr","distr","gevotes","year"))
colnames(dvote)[3] <- "dvote"
dvote$abbr <- gsub("\\s+","",dvote$abbr)
results$abbr <- gsub("\\s+","",results$abbr)
results <- merge(results, dvote, by = c("abbr","distr","year"))
results <- subset(results, id != "")
results <- subset(results, id != "n/a")
results <- subset(results,gevotes != "Unopposed")
results <- subset(results, geperr != "n/a")
results <- subset(results, rovotes == "")
results$gevotes <- gsub("\\D+","",results$gevotes)
results$gevotes <- as.numeric(results$gevotes)
results$id <- trimws(results$id)
results$namer <- gsub("#", "", results$namer)
results$namer <- trimws(results$namer)
results$distr <- gsub("\\s+","",results$distr)
results$distr <- gsub("*","",results$distr)
results <- results[which(results$distr==results$dist1),]
results$dist1 <- NULL
results$totvote <- NULL
results$rovotes <- gsub("\\s+","",results$rovotes)
results <- subset(results, rovotes =="")
results$geperr <- gsub("%","",results$geperr)
results <- subset(results, gevotes!="#")
results$party <- gsub("\\s+","",results$party)
results$party <- gsub("/.*","",results$party)
results$party[results$party=="REP"] <- "R"
results$party[results$party=="R*"] <- "R"
results$party[results$party=="GOP"] <- "R"
results$rep <- ifelse(results$party == "R", 1, 0)
results$party[results$party=="DEM"] <- "D"
results$indp <- ifelse(results$party!="R",ifelse(results$party!="D", 1,0),0)
results$party <- NULL
results$first <- NULL
results$last <- NULL
results$id <- gsub("\\s+","",results$id)
####################################################################
####################################################################
##################       Campaign Finance      #####################
####################################################################
####################################################################
cs14 <- read.csv("cs14.csv")
cs12 <- read.csv("cs12.csv")
cs10 <- read.csv("cs10.csv")
cs08 <- read.csv("cs08.csv")
cs06 <- read.csv("cs06.csv")
cs04 <- read.csv("cs04.csv")
###################
###################
#### Var Edits ####
###################
###################
cs14$year <- 2014
cs12$year <- 2012
cs10$year <- 2010
cs08$year <- 2008
cs06$year <- 2006
cs04$year <- 2004
cs04 <- subset(cs04, runoff=="")
cs04$runoff <- NA
cs06$runoff <- NA
cs <- rbind(cs14, cs12, cs10, cs08, cs06, cs04)
cs <- subset(cs, is.na(runoff))
cs$runoff <- NULL
cs$race <- substr(cs$id,0,1)
cs <- subset(cs, cs$race =="H")
cs$race <- NULL
## Merge ##
test <- merge(cs,results, by = c("id","year","abbr"))
## Dummies ##
test$incm <- ifelse(test$inc=="I",1,0)
test$open <- ifelse(test$inc=="O",1,0)
test$rep <- ifelse(test$pcode == 2,1,0)
test$indp <- ifelse(test$pcode == 3,1,0)
###################
###################
## String Clean ###
###################
###################
test$dvote <- gsub("\\D+","",test$dvote)
test$dvote <- as.numeric(test$dvote)
test$geperr <- gsub("%","",test$geperr)
test$geperr <- as.numeric(test$geperr)
test$gevotes <- gsub("\\D+","",test$gevotes)
test$gevotes <- as.numeric(test$gevotes)
test$geperr <- ifelse(is.na(test$geperr), test$gevotes/test$dvote, test$geperr)
drops <- c("last..first","inc","pcode","party.x","spec","gewin","geper","distr","incr","first","last","party.y","rovotes")
test <- test[,!(names(test) %in% drops)]
dat <- subset(test, complete.cases(gevotes)) ## 5509 obs
dat <- subset(test, gevotes>100)
lista <- c("AS","DC","GU","MP","VI","PR")
dat <- dat[!(dat$abbr %in% lista),]
dat$state <- gsub("\\s+","",dat$state)
dat$namer <- gsub("\\s{2}","\\s",dat$namer)
dat$gewinr<-NULL
dat$party<-NULL
# dat$namer <- gsub("^(\\S+\\s\\S+)\\s.*$","\\1",dat$namer)
#spend <- aggregate(dat$otherpolcom, by=list(dat$abbr,dat$dist,dat$year), FUN=sum, na.rm=TRUE)
####################################################################
####################################################################
##################       Data & Super Pac      #####################
####################################################################
####################################################################
ie10 <- read.csv("labelled-expenditures-2010.csv")
ie12 <- read.csv("labelled-expenditures-2012.csv")
ie14 <- read.csv("labelled-expenditures-2014.csv")
ie10 <- subset(ie10, can_off=="H" & ele_typ=="G")
ie12 <- subset(ie12, can_off=="H" & ele_typ=="G")
ie14 <- subset(ie14, can_off=="H" & ele_typ=="G")
ie10$year <- 2010
ie12$year <- 2012
ie14$year <- 2014
ie <- rbind(ie10,ie12,ie14)
ie$can_id <- toupper(ie$can_id)
dat2 <- dat %>%
group_by(id,year,abbr,fips,red,totrec,totdis,candcont,indcont,dist,otherpolcom,partycont,state,open,rep,indp) %>%
summarise(
namer = first(namer),
gevotes = sum(gevotes),
geperr = sum(geperr),
incm = max(incm),
dvote = max(dvote, rm.na = TRUE)
)
dat2 <- dat %>%
group_by(id,year,abbr,red,totrec,totdis,candcont,indcont,dist,otherpolcom,partycont,state,open,rep,indp) %>%
summarise(
namer = first(namer),
gevotes = sum(gevotes),
geperr = sum(geperr),
incm = max(incm),
dvote = max(dvote, rm.na = TRUE)
)
dat2 <- dat %>%
group_by(id,year,abbr,totrec,totdis,candcont,indcont,dist,otherpolcom,partycont,state,open,rep,indp) %>%
summarise(
namer = first(namer),
gevotes = sum(gevotes),
geperr = sum(geperr),
incm = max(incm),
dvote = max(dvote, rm.na = TRUE)
)
View(dat2)
dat3 <- dat2 %>%
group_by(id,year) %>%
filter(n()>1)
dat <- dat %>%
group_by(id,year,abbr,totrec,totdis,candcont,indcont,dist,otherpolcom,partycont,state,open,rep,indp) %>%
summarise(
namer = first(namer),
gevotes = sum(gevotes),
geperr = sum(geperr),
incm = max(incm),
dvote = max(dvote, rm.na = TRUE)
)
dat3 <-NULL
dat2 <-NULL
aggregated_expenditures <- ie %>%
mutate(agg = parse_number(agg_amo)) %>%
arrange(desc(rec_dat)) %>%
group_by(year, can_id, sup_opp, spe_id) %>%
dplyr::summarise(best_agg = first(agg)) %>%
group_by(can_id, year, sup_opp) %>%
dplyr::summarise(total_agg = sum(best_agg))
install.packages(readr)
install.packages("readr")
library(readr)
aggregated_expenditures <- ie %>%
mutate(agg = parse_number(agg_amo)) %>%
arrange(desc(rec_dat)) %>%
group_by(year, can_id, sup_opp, spe_id) %>%
dplyr::summarise(best_agg = first(agg)) %>%
group_by(can_id, year, sup_opp) %>%
dplyr::summarise(total_agg = sum(best_agg))
View(aggregated_expenditures)
levels(aggregated_expenditures$sup_opp)
aggregated_expenditures %>%
ungroup() %>%
summarize(tot = sum(total_agg, na.rm=TRUE))
View(aggregated_expenditures)
View(ie)
aggregated_expenditures <- ie %>%
mutate(agg = parse_number(agg_amo)) %>%
arrange(desc(rec_dat)) %>%
group_by(year, can_id, sup_opp, spe_id, super_pac) %>%
dplyr::summarise(best_agg = first(agg)) %>%
group_by(can_id, year, sup_opp) %>%
dplyr::summarise(total_agg = sum(best_agg))
aggregated_expenditures %>%
ungroup() %>%
summarize(tot = sum(total_agg, na.rm=TRUE))
aggregated_expenditures <- ie %>%
mutate(agg = parse_number(agg_amo)) %>%
arrange(desc(rec_dat)) %>%
group_by(year, can_id, sup_opp, spe_id, super_pac) %>%
dplyr::summarise(best_agg = first(agg)) %>%
group_by(can_id, year, sup_opp, super_pac) %>%
dplyr::summarise(total_agg = sum(best_agg))
aggregated_expenditures %>%
ungroup() %>%
summarize(tot = sum(total_agg, na.rm=TRUE))
aggregated_expenditures <- ie %>%
mutate(agg = parse_number(agg_amo)) %>%
arrange(desc(rec_dat)) %>%
group_by(year, can_id, sup_opp, spe_id) %>%
dplyr::summarise(best_agg = first(agg)) %>%
group_by(can_id, year, sup_opp) %>%
dplyr::summarise(total_agg = sum(best_agg))
aggregated_expenditures$can_id <- gsub("\\s+","",aggregated_expenditures$can_id)
aggregated_expenditures <- subset(aggregated_expenditures, can_id!="")
library(reshape2)
aggexp <- dcast(aggregated_expenditures, can_id+year ~ sup_opp, value.var = "total_agg")
View(aggexp)
a <- aggexp[complete.castes(aggexp$` `),]
a <- aggexp[complete.cases(aggexp$` `),]
View(a)
levels(aggregated_expenditures$sup_opp)
aggregated_expenditures$sup_opp <- gsub(" ",NA, aggregated_expenditures$sup_opp)
View(aggregated_expenditures)
aggexp <- dcast(aggregated_expenditures, can_id+year ~ sup_opp, value.var = "total_agg")
View(aggexp)
aggexp$`NA` <-NULL
colnames(aggexp) <- c("id","year","iesup","ieopp")
ideol <- read.csv("ideol.csv")
ideolr <-read.csv("ideol redistrict.csv")
fips <- read.csv("fips.csv")
ideolr$red <- 1
ideol$red <- 0
ideol <- rbind(ideol,ideolr)
dat <- merge(dat, fips, by=c("abbr"))
dat$dist <- ifelse(dat$dist==0 & dat$year<2014,1,dat$dist)
dat$fips <- 100*dat$fips
dat$fips <- dat$fips + dat$dist
dat$red <- ifelse(dat$year==2014,1,0)
dat <- merge(dat,ideol, by=c("abbr","fips","red"))
View(dat)
?merge
dat1 <- merge(dat,aggexp,all.x = TRUE)
View(dat1)
table(is.na(dat1$iesup))
table(is.na(dat1$ieopp))
table(is.na(dat1$ieopp)&is.na(dat1$iesup))
table(complete.cases(dat1$ieopp)& complete.cases(dat1$iesup))
?lm
table(is.na(dat1$geperr))
a <- subset(dat1,incm==1)
mean(a$indcont)
b <- subset(dat1,incm==0)
mean(b$indcont)
summary(a$indcont)
summary(b$indcont)
summary(a$otherpolcom)
summary(b$otherpolcom)
setopen <- subset(dat1,open==1)
dat1$ieopp <- ifelse(is.na(dat1$ieopp),0,dat1$ieopp)
dat1$iesup <- ifelse(is.na(dat1$iesup),0,dat1$iesup)
dat1$ltotrec <- log(dat1$totrec + 1)
dat1$ltotdis <- log(dat1$totdis + 1)
dat1$lcandcont <- log(dat1$candcont + 1)
dat1$lindcont <- log(dat1$indcont + 1)
dat1$lpac <- log(dat1$otherpolcom + 1)
dat1$lpartycont <- log(dat1$partycont + 1)
dat1$liesup <- log(dat1$iesup + 1)
dat1$lieopp <- log(dat1$ieopp + 1)
dat1$diff <- dat1$rep-
comp <- read.csv("comp.csv")
dat1$diff <- dat1$rep-
comp <- read.csv("comp.csv")
dat1$diff <- dat1$rep-
comp <- read.csv("comp.csv")
comp <- read.csv("comp.csv")
View(comp)
comp <- comp[unique(comp$District),1]
comp
dat1$diff <- (dat1$ideol +1)/2
summary(dat1$diff)
dat1$diff <- abs(dat1$rep-dat1$ideol)
perpooled <- lm(data=dat1,geperr~ltotdis+liesup+lieopp+rep+indp+open+incm+diff)
summary(perpooled)
perpooled <- lm(data=dat1,geperr~ltotdis+liesup+lieopp+rep+indp+open+incm+ideol)
summary(perpooled)
perpooled <- lm(data=dat1,geperr~ltotdis+liesup+lieopp+rep+indp+open+incm+ideol+as.factor(year))
summary(perpooled)
vpooled <- lm(data=dat1,gevotes~ltotdis+liesup+lieopp+rep+indp+open+incm+ideol+dvote+as.factor(year))
summary(vpooled)
perpooled <- lm(data=dat1,geperr~ltotdis+liesup+lieopp+rep+indp+open+incm+diff+as.factor(year))
summary(vpooled)
summary(perpooled)
perpooled <- lm(data=dat1,geperr~ltotdis+liesup+lieopp+rep+indp+open+incm+ideol+as.factor(year))
summary(perpooled)
perpooled2 <- lm(data=dat1,geperr~lindcont+lpac+lpartycont+liesup+lieopp+rep+indp+open+incm+ideol+as.factor(year))
summary(perpooled2)
dat1$ldiff <- liesup-lieopp
dat1$ldiff <- dat1$liesup-dat1$lieopp
perpooled3 <- lm(data=dat1,geperr~lindcont+lpac+lpartycont+ldiff+rep+indp+open+incm+ideol+as.factor(year))
summary(perpooled3)
datr <- subset(dat1, rep==1)
datd <- subset(dat1, rep==0)
perpooledr <- lm(data=rep,geperr~lindcont+lpac+lpartycont+ldiff+indp+open+incm+ideol+as.factor(year))
perpooledr <- lm(data=datr,geperr~lindcont+lpac+lpartycont+ldiff+open+incm+ideol+as.factor(year))
summary(perpooledr)
perpooledr <- lm(data=datr,geperr~lindcont+lpac+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year))
summary(perpooledr)
perpooledd <- lm(data=datd,geperr~lindcont+lpac+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year))
summary(perpooledd)
perpooledr2 <- lm(data=datr,geperr~lindcont+lpac+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year))
perpooledd2 <- lm(data=datd,geperr~lindcont+lpac+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year))
perpooledr <- lm(data=datr,geperr~ltotdis+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year))
perpooledd <- lm(data=datd,geperr~ltotdis+lpac+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year))
summary(perpooledr)
summary(perpooledd)
pooled <- lm(data=dat1,geperr~ltotdis+liesup+lieopp+rep+indp+open+incm+ideol+as.factor(year))
pooled2 <- lm(data=dat1,geperr~lindcont+lpac+lpartycont+liesup+lieopp+rep+indp+open+incm+ideol+as.factor(year))
pooled3 <- lm(data=dat1,geperr~lindcont+lpac+lpartycont+ldiff+rep+indp+open+incm+ideol+as.factor(year))
repres <- lm(data=datr,geperr~ltotdis+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year))
demres <- lm(data=datd,geperr~ltotdis+lpac+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year))
repres2 <- lm(data=datr,geperr~lindcont+lpac+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year))
demres2 <- lm(data=datd,geperr~lindcont+lpac+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year))
datopen <- subset(dat1,open==1)
openres <- lm(data=dat1,geperr~ltotdis+liesup+lieopp+rep+indp+incm+ideol+as.factor(year))
summary(openres)
openres <- lm(data=datopen,geperr~ltotdis+liesup+lieopp+rep+indp+incm+ideol+as.factor(year))
summary(openres)
summary(openres)
openres <- lm(data=datopen,geperr~ltotdis+liesup+lieopp+rep+indp+ideol+as.factor(year))
summary(openres)
pooledabs <- lm(data=dat1,geperr~ltotdis+liesup+lieopp+rep+indp+open+incm+abs(ideol)+as.factor(year))
summary(pooledabs)
summary(openres)
openres <- lm(data=datopen,geperr~ltotdis+liesup+lieopp+rep+indp+abs(ideol)+as.factor(year))
summary(openres)
openres <- lm(data=datopen,geperr~ltotdis+liesup+lieopp+rep+indp+ideol+as.factor(year))
summary(openres)
openres2 <- lm(data=datopen,geperr~lindcont+lpac+lpartycont+liesup+lieopp+rep+indp+ideol+as.factor(year))
summary(openres2)
pooled <- lm(data=dat1,geperr~ltotdis+liesup+lieopp+rep+indp+open+incm+ideol+as.factor(year)+as.factor(fips))
pooledfe <- lm(data=dat1,geperr~ltotdis+liesup+lieopp+rep+indp+open+incm+ideol+as.factor(year)+as.factor(fips))
summary(pooledfe)
pooledfe2 <- lm(data=dat1,geperr~lindcont+lpac+lpartycont+liesup+lieopp+rep+indp+open+incm+ideol+as.factor(year)+as.factor(fips))
summary(pooledfe2)
pooled3 <- lm(data=dat1,geperr~lindcont+lpac+lpartycont+ldiff+rep+indp+open+incm+ideol+as.factor(year)+as.factor(fips))
summary(pooledfe3)
pooledfe3 <- lm(data=dat1,geperr~lindcont+lpac+lpartycont+ldiff+rep+indp+open+incm+ideol+as.factor(year)+as.factor(fips))
summary(pooledfe3)
represfe <- lm(data=datr,geperr~ltotdis+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year)+as.factor(fips))
demresfe <- lm(data=datd,geperr~ltotdis+lpac+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year)+as.factor(fips))
summary(represfe)
summary(demresfe)
repres <- lm(data=datr,geperr~ltotdis+liesup+lieopp+open+incm+ideol+as.factor(year))
demres <- lm(data=datd,geperr~ltotdis+liesup+lieopp+open+incm+ideol+as.factor(year))
represfe <- lm(data=datr,geperr~ltotdis+liesup+lieopp+open+incm+ideol+as.factor(year)+as.factor(fips))
demresfe <- lm(data=datd,geperr~ltotdis+liesup+lieopp+open+incm+ideol+as.factor(year)+as.factor(fips))
summary(represfe)
represfe2 <- lm(data=datr,geperr~lindcont+lpac+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year)+as.factor(fips))
demresfe2 <- lm(data=datd,geperr~lindcont+lpac+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year)+as.factor(fips))
openresfe <- lm(data=datopen,geperr~ltotdis+liesup+lieopp+rep+indp+ideol+as.factor(year)+as.factor(fips))
openresfe2 <- lm(data=datopen,geperr~lindcont+lpac+lpartycont+liesup+lieopp+rep+indp+ideol+as.factor(year)+as.factor(fips))
summary(openresfe)
summary(openresfe2)
View(dat)
dat <- subset(test, complete.cases(gevotes)) ## 5509 obs
dat <- subset(test, gevotes>100)
lista <- c("AS","DC","GU","MP","VI","PR")
dat <- dat[!(dat$abbr %in% lista),]
dat$state <- gsub("\\s+","",dat$state)
dat$namer <- gsub("\\s{2}","\\s",dat$namer)
dat$gewinr<-NULL
dat$party<-NULL
dat <- dat %>%
group_by(id,year,abbr,totrec,totdis,candcont,indcont,dist,otherpolcom,partycont,state,open,rep,indp) %>%
summarise(
namer = first(namer),
gevotes = sum(gevotes),
geperr = sum(geperr),
incm = max(incm),
dvote = max(dvote, rm.na = TRUE)
)
dat2 <- dat %>%
group_by(year,abbr,dist,state,dvote) %>%
filter(n()>1) %>%
arrange(desc(geperr)) %>%
summarise(lastper = max(geperr)-geperr[2])
View(dat2)
dat[dat$abbr=="AL"&dat$dist==1&year==2004,]
dat[dat$abbr=="AL" & dat$dist==1 & year==2004,]
dat[dat$abbr=="AL" & dat$dist==1 & as.character(year)=="2004",]
subset(dat, abbr=="AL" & dist==1 & year ==2004)
?subset
subset(dat, abbr=="AL" & dist==1 & year ==2004, select = geperr)
dat3 <- merge(dat,dat2,by=c("year","abbr","dist","state","dvote"),all.x = TRUE)
View(dat3)
dat2$year <- dat2$year +2
dat2 <- dat2[!(dat2$year==2016),]
dat2$dvote <-NULL
View(dat2)
dat3 <- merge(dat,dat2,by=c("year","abbr","dist","state"),all.x = TRUE)
dat <- merge(dat, fips, by=c("abbr"))
dat$dist <- ifelse(dat$dist==0 & dat$year<2014,1,dat$dist)
dat$fips <- 100*dat$fips
dat$fips <- dat$fips + dat$dist
dat$red <- ifelse(dat$year==2014,1,0)
dat <- merge(dat,ideol, by=c("abbr","fips","red"))
dat1 <- merge(dat,aggexp,all.x = TRUE)
View(dat1)
dat <- subset(test, complete.cases(gevotes)) ## 5509 obs
dat <- subset(test, gevotes>100)
lista <- c("AS","DC","GU","MP","VI","PR")
dat <- dat[!(dat$abbr %in% lista),]
dat$state <- gsub("\\s+","",dat$state)
dat$namer <- gsub("\\s{2}","\\s",dat$namer)
dat$gewinr<-NULL
dat$party<-NULL
dat <- dat %>%
group_by(id,year,abbr,totrec,totdis,candcont,indcont,dist,otherpolcom,partycont,state,open,rep,indp) %>%
summarise(
namer = first(namer),
gevotes = sum(gevotes),
geperr = sum(geperr),
incm = max(incm),
dvote = max(dvote, rm.na = TRUE)
)
dat2 <- dat %>%
group_by(year,abbr,dist,state,dvote) %>%
filter(n()>1) %>%
arrange(desc(geperr)) %>%
summarise(lastper = max(geperr)-geperr[2])
dat2$year <- dat2$year +2
dat2 <- dat2[!(dat2$year==2016),]
dat2$dvote <-NULL
dat <- merge(dat,dat2,by=c("year","abbr","dist","state"),all.x = TRUE)
View(dat)
table(is.na(dat$lastper))
dat <- merge(dat, fips, by=c("abbr"))
dat$dist <- ifelse(dat$dist==0 & dat$year<2014,1,dat$dist)
dat$fips <- 100*dat$fips
dat$fips <- dat$fips + dat$dist
dat$red <- ifelse(dat$year==2014,1,0)
dat <- merge(dat,ideol, by=c("abbr","fips","red"))
dat1 <- merge(dat,aggexp,all.x = TRUE)
dat1$ltotrec <- log(dat1$totrec + 1)
dat1$ltotdis <- log(dat1$totdis + 1)
dat1$lcandcont <- log(dat1$candcont + 1)
dat1$lindcont <- log(dat1$indcont + 1)
dat1$lpac <- log(dat1$otherpolcom + 1)
dat1$lpartycont <- log(dat1$partycont + 1)
dat1$ieopp <- ifelse(is.na(dat1$ieopp),0,dat1$ieopp)
dat1$iesup <- ifelse(is.na(dat1$iesup),0,dat1$iesup)
dat1$liesup <- log(dat1$iesup + 1)
dat1$lieopp <- log(dat1$ieopp + 1)
dat1$ldiff <- dat1$liesup-dat1$lieopp
View(dat1)
dat1 <- merge(dat,aggexp,all.x = TRUE)
table(is.na(dat1$lastper))
pooledcfe <- lm(data=dat1,geperr~ltotdis+liesup+lieopp+lastper+rep+indp+open+incm+ideol+as.factor(year)+as.factor(fips))
dat1$ltotrec <- log(dat1$totrec + 1)
dat1$ltotdis <- log(dat1$totdis + 1)
dat1$lcandcont <- log(dat1$candcont + 1)
dat1$lindcont <- log(dat1$indcont + 1)
dat1$lpac <- log(dat1$otherpolcom + 1)
dat1$lpartycont <- log(dat1$partycont + 1)
dat1$ieopp <- ifelse(is.na(dat1$ieopp),0,dat1$ieopp)
dat1$iesup <- ifelse(is.na(dat1$iesup),0,dat1$iesup)
dat1$liesup <- log(dat1$iesup + 1)
dat1$lieopp <- log(dat1$ieopp + 1)
dat1$ldiff <- dat1$liesup-dat1$lieopp
pooledcfe <- lm(data=dat1,geperr~ltotdis+liesup+lieopp+lastper+rep+indp+open+incm+ideol+as.factor(year)+as.factor(fips))
pooledcfe2 <- lm(data=dat1,geperr~lindcont+lpac+lpartycont+liesup+lieopp+lastper+rep+indp+open+incm+ideol+as.factor(year)+as.factor(fips))
summary(pooledcfe)
summary(pooledcfe2)
datr <- subset(dat1, rep==1)
datd <- subset(dat1, rep==0)
datopen <- subset(dat1,open==1)
represcfe2 <- lm(data=datr,geperr~lindcont+lpac+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year)+as.factor(fips))
demrescfe2 <- lm(data=datd,geperr~lindcont+lpac+lpartycont+liesup+lieopp+open+incm+ideol+as.factor(year)+as.factor(fips))
represcfe <- lm(data=datr,geperr~ltotdis+liesup+lieopp+open+incm+ideol+as.factor(year)+as.factor(fips))
demrescfe <- lm(data=datd,geperr~ltotdis+liesup+lieopp+open+incm+ideol+as.factor(year)+as.factor(fips))
summary(represcfe)
summary(represcfe2)
represcfe <- lm(data=datr,geperr~ltotdis+liesup+lieopp+lastper+open+incm+ideol+as.factor(year)+as.factor(fips))
demrescfe <- lm(data=datd,geperr~ltotdis+liesup+lieopp+lastper+open+incm+ideol+as.factor(year)+as.factor(fips))
represcfe2 <- lm(data=datr,geperr~lindcont+lpac+lpartycont+liesup+lieopp+lastper+open+incm+ideol+as.factor(year)+as.factor(fips))
demrescfe2 <- lm(data=datd,geperr~lindcont+lpac+lpartycont+liesup+lieopp+lastper+open+incm+ideol+as.factor(year)+as.factor(fips))
summary(represcfe)
summary(represcfe2)
openrescfe <- lm(data=datopen,geperr~ltotdis+liesup+lieopp+lastper+rep+indp+ideol+as.factor(year)+as.factor(fips))
openrescfe2 <- lm(data=datopen,geperr~lindcont+lpac+lpartycont+liesup+lieopp+lastper+rep+indp+ideol+as.factor(year)+as.factor(fips))
summary(openrescfe)
summary(openrescfe2)
openresife <- lm(data=datopen,geperr~ltotdis+liesup+lieopp+lastper+liesup*lastper+lieopp*lastper+rep+indp+ideol+as.factor(year)+as.factor(fips))
summary(openresife)
corr(dat1$ltotdis,dat1$liesup)
cor(dat1$ltotdis,dat1$liesup)
a <- subset(dat1, select = c("ltotdis","lindcont","lpac","liesup","lieopp","lastper"))
cor(a)
cor(a,na.rm=TRUE)
openresife <- lm(data=datopen,geperr~ltotdis+liesup+lastper+liesup*lastper+rep+indp+ideol+as.factor(year)+as.factor(fips))
summary(openresife)
a <- subset(dat1, complete.cases(lastper),select = c("ltotdis","lindcont","lpac","liesup","lieopp","lastper"))
cor(a)
a <- subset(dat1, complete.cases(lastper),select = c("geperr","ltotdis","lindcont","lpac","liesup","lieopp","lastper"))
cor(a)
openresife <- lm(data=datopen,geperr~ltotdis+liesup+lastper+ltotdis*lastper+liesup*lastper+rep+indp+ideol+as.factor(year)+as.factor(fips))
summary(openresife)
